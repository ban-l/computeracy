# 数据库系统

## 数据库设计过程

1. 需求分析
   1. 数据流图(DFD)：以图形方式描绘数据在系统中流动和处理的过程。
   2. 用例图(Use Case Diagram)：描述如何使用系统，包括：用例、参与者、参与者和用例之间的关系。
2. 概念结构设计：ER模型(实体、属性、联系)
3. 逻辑结构设计
   1. ER模型 -> 关系模式：实体转换、属性转换、联系转换
   2. 函数依赖
   3. 关系范式
4. 物理设计
5. 数据库实施
6. 运行与维护

## 函数依赖

若在一张表中，属性(属性组) X 的值，必能确定属性 Y 的值，那么 Y 函数依赖于 X，写作 X → Y。

函数依赖：部分函数依赖、完全函数依赖。

部分函数依赖：

- 如果 X→Y，并存在 X 的一个真子集 X0，使得 X0→Y，则称 Y 对 X 部分函数依赖，否则就是完全函数依赖。


示例：学生基本信息表 R 中（学号，身份证号，姓名），学号属性取值是唯一的，在 R 关系中：

- 学号、身份证号 -> 姓名；
- 学号 -> 姓名，学号是一个真子集；
- 身份证号 -> 姓名，身份证号是一个真子集；
- 姓名 部分函数依赖 学号和身份证号。

## 键（候选码，主码）

- 候选码：若关系中的某一属性(属性组)能唯一标识一个元组，而其任何子集都不能再标识，则称属性(属性组)为候选码。
- 主码（主键） : 主码从候选码中选出来的， 一个实体集中只能有一个主码，但可以有多个候选码。

## 关系存在的异常

主要有以下四种异常：

- 冗余数据：记录出现多次；
- 修改异常：修改了一个记录中的信息，但是另一个记录中相同的信息却没有被修改；
- 删除异常：删除一个信息，那么也会丢失其它信息；
- 插入异常：例如想要插入一个学生的信息，如果这个学生还没选课，那么就无法插入。

## 范式

高级别范式的依赖于低级别的范式，1NF 是最低级别的范式。

- 第一范式 (1NF)
  - 属性值都是不可分的原子值
- 第二范式 (2NF)
  - 非主属性 完全函数依赖于键码
- 第三范式 (3NF)
  - 非主属性 不传递函数依赖于键码
