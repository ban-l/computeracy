# 三级模式-两级映射

数据库的**三级模式-两级映射**是经典的数据抽象架构，它将数据库系统分为**三个抽象层次**，并通过**两级映射**实现层级间的转换，核心目的是实现**数据独立性**。

---

## 一、三级模式（Three-Level Schema）

### **1. 外模式（External Schema）**
- **又称子模式或用户模式**，是用户能看到和使用的那部分数据的逻辑结构。
- **面向用户或应用程序**，每个用户或应用可有一个或多个外模式。
- 外模式是概念模式的子集，不同用户的外模式可以重叠或不同。
- **作用**：保证数据安全（用户只能访问外模式中的数据）、简化用户接口。

### **2. 概念模式（Conceptual Schema）**
- **又称逻辑模式或全局模式**，是对数据库中全体数据的**整体逻辑结构和特征**的描述。
- 包括所有实体、属性、关系、约束等，是数据库管理员（DBA）看到的全局数据视图。
- **一个数据库只有一个概念模式**，是三级模式的核心。

### **3. 内模式（Internal Schema）**
- **又称存储模式**，描述数据的**物理结构和存储方式**。
- 包括数据文件、索引组织、存储路径、压缩加密方式等。
- 关注数据在存储介质上的实现细节。

---

## 二、两级映射（Two-Level Mapping）

映射负责在相邻模式间进行**转换**，使得逻辑独立性和物理独立性得以实现。

### **1. 外模式/概念模式映射**
- 定义外模式与概念模式之间的对应关系。
- **作用**：当概念模式改变时（如增加字段、修改关系），只需调整此映射，而外模式可以保持不变，从而保证**逻辑数据独立性**。

### **2. 概念模式/内模式映射**
- 定义概念模式与内模式之间的对应关系。
- **作用**：当内模式改变时（如更换存储结构、索引方式），只需调整此映射，而概念模式保持不变，从而保证**物理数据独立性**。

---

## 三、简单图示与总结

```
用户/应用程序
    │ ← 使用外模式
外模式（多个）
    │ ← 外模式/概念模式映射（逻辑独立性）
概念模式（唯一）
    │ ← 概念模式/内模式映射（物理独立性）
内模式（唯一）
    │
物理存储
```

**关键价值**：
1. **逻辑独立性**：概念模式变化不影响应用程序。
2. **物理独立性**：物理存储结构变化不影响概念模式和外模式。
3. **数据安全**：用户仅通过外模式访问数据，屏蔽了无关数据。
4. **数据共享**：不同用户可使用不同外模式访问同一全局数据。

---

这种架构在关系型数据库管理系统（如 Oracle、MySQL）中普遍实现，虽然具体实现中细节可能隐藏，但其设计思想仍是现代数据库系统的理论基础。